apiVersion: v1
kind: ConfigMap
metadata:
  name: nodebb-configmap
data:
  config.json: |
    {
      "url": "{{ .Values.nodebb.config.url}}",
      "secret": "{{ .Values.nodebb.config.secret}}",
      "database": "mongo",
      "mongo": {
        "uri": "mongodb://{{ .Values.mongodb.user}}:{{ .Values.mongodb.password}}@{{ .Values.mongodb.host}}:{{ .Values.mongodb.port }}/{{ .Values.mongodb.database}}?authSource={{ .Values.mongodb.authSource}}"
      },
      "admin": {
        "username": "{{ .Values.nodebb.config.admin.username }}",
        "password": "{{ .Values.nodebb.config.admin.password }}",
        "email": "{{ .Values.nodebb.config.admin.email}}"
      },
      "upload_path": "https://{{ .Values.nodebb.config.azure.accountName}}.blob.core.windows.net/{{ .Values.nodebb.config.azure.containerName}}/?{{ .Values.nodebb.config.azure.sasToken}}"
    }
